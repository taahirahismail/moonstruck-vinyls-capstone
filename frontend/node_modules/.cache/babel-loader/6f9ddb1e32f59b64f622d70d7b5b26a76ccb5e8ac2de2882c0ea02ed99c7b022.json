{"ast":null,"code":"const classed = require('@compone/class'),\n  event = require('@compone/event'),\n  client = require('utilise/client'),\n  noop = () => {},\n  HTMLElement = client && window.HTMLElement || class {},\n  registry = client && window.customElements || {};\nmodule.exports = function define(name, component) {\n  if (arguments.length == 1) {\n    component = name, name = `anon-${registry.anon++}`;\n  }\n  if (component.hasOwnProperty('wrapper')) return component.wrapper;\n  if (!name.includes('-')) return;\n  if (!client) return wrap(classed(component));\n  let wrapped = registry.get(name);\n  if (wrapped) {\n    if (wrapped.class == classed(component)) return wrapped;\n    wrapped.class = classed(component);\n    const instances = Array.from(document.querySelectorAll(name));\n    instances.map(node => {\n      // TODO: should probably await these\n      node.disconnectedCallback();\n      node.methods.map(method => {\n        delete node[method];\n      });\n      node.connectedCallback();\n    });\n  } else {\n    registry.define(name, wrapped = wrap(classed(component)));\n  }\n  return wrapped;\n};\nconst wrap = component => {\n  if (!component.hasOwnProperty('wrapper')) component.wrapper = class extends HTMLElement {\n    constructor() {\n      super();\n      event(this);\n      this.ready = this.once('ready');\n      this.state = this.state || {};\n    }\n    connectedCallback() {\n      const {\n        prototype\n      } = component.wrapper.class;\n      this.methods = Object.getOwnPropertyNames(prototype).filter(method => !(method in disallowed)).map(method => (this[method] = prototype[method].bind(this), method));\n      return Promise.resolve((this.connected || noop).call(this, this, this.state)).then(d => {\n        this.emit('ready');\n        return this.render();\n      });\n    }\n    render() {\n      const {\n        prototype\n      } = component.wrapper.class;\n      return this.pending = this.pending || this.ready.then(() => {\n        delete this.pending;\n        return prototype.render.call(this, this, this.state);\n      });\n    }\n    disconnectedCallback() {\n      (this.disconnected || noop).call(this, this, this.state);\n      this.dispatchEvent(new CustomEvent('disconnected'));\n      this.initialised = false;\n    }\n    get(sel) {\n      return this.querySelector(sel);\n    }\n  };\n  component.wrapper.class = component;\n  return component.wrapper;\n};\nconst disallowed = {\n  length: 1,\n  prototype: 1,\n  name: 1,\n  render: 1\n};\nregistry.anon = registry.anon || 1;","map":{"version":3,"names":["classed","require","event","client","noop","HTMLElement","window","registry","customElements","module","exports","define","name","component","arguments","length","anon","hasOwnProperty","wrapper","includes","wrap","wrapped","get","class","instances","Array","from","document","querySelectorAll","map","node","disconnectedCallback","methods","method","connectedCallback","constructor","ready","once","state","prototype","Object","getOwnPropertyNames","filter","disallowed","bind","Promise","resolve","connected","call","then","d","emit","render","pending","disconnected","dispatchEvent","CustomEvent","initialised","sel","querySelector"],"sources":["C:/Users/Student/Desktop/Development/Capstone/moonstruck-vinyls-capstone/frontend/node_modules/@compone/define/index.js"],"sourcesContent":["const classed = require('@compone/class')\r\n    , event = require('@compone/event')\r\n    , client = require('utilise/client')\r\n    , noop = () => {}\r\n    , HTMLElement = client && window.HTMLElement || class {}\r\n    , registry = client && window.customElements || {}\r\n\r\nmodule.exports = function define(name, component) {\r\n  if (arguments.length == 1) { component = name, name = `anon-${registry.anon++}` }\r\n  if (component.hasOwnProperty('wrapper')) return component.wrapper\r\n  if (!name.includes('-')) return;\r\n  if (!client) return wrap(classed(component))\r\n  let wrapped = registry.get(name)\r\n\r\n  if (wrapped) {\r\n    if (wrapped.class == classed(component)) return wrapped\r\n    wrapped.class = classed(component)\r\n    const instances = Array.from(document.querySelectorAll(name))\r\n    instances.map(node => { // TODO: should probably await these\r\n      node.disconnectedCallback() \r\n      node.methods.map(method => { delete node[method] })\r\n      node.connectedCallback()\r\n    })\r\n  } else {\r\n    registry.define(name, wrapped = wrap(classed(component)))\r\n  }\r\n\r\n  return wrapped\r\n}\r\n\r\nconst wrap = component => {\r\n  if (!component.hasOwnProperty('wrapper'))\r\n    component.wrapper = class extends HTMLElement {\r\n      constructor(){\r\n        super()\r\n        event(this)\r\n        this.ready = this.once('ready')\r\n        this.state = this.state || {}\r\n      }\r\n\r\n      connectedCallback(){ \r\n        const { prototype } = component.wrapper.class\r\n        this.methods = Object\r\n          .getOwnPropertyNames(prototype)\r\n          .filter(method => !(method in disallowed))\r\n          .map(method => ((this[method] = prototype[method].bind(this)), method))\r\n\r\n        return Promise.resolve((this.connected || noop).call(this, this, this.state))\r\n          .then(d => {\r\n            this.emit('ready')\r\n            return this.render()\r\n          })\r\n      }\r\n\r\n      render(){\r\n        const { prototype } = component.wrapper.class\r\n        return this.pending = this.pending || this.ready\r\n          .then(() => { \r\n            delete this.pending\r\n            return prototype.render.call(this, this, this.state)  \r\n          })\r\n      }\r\n\r\n      disconnectedCallback(){\r\n        (this.disconnected || noop).call(this, this, this.state)\r\n        this.dispatchEvent(new CustomEvent('disconnected')) \r\n        this.initialised = false\r\n      }\r\n\r\n      get(sel){\r\n        return this.querySelector(sel)\r\n      }\r\n    }\r\n\r\n  component.wrapper.class = component\r\n  return component.wrapper\r\n}\r\n\r\nconst disallowed = { length: 1, prototype: 1, name: 1, render: 1 }\r\n\r\nregistry.anon = registry.anon || 1"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}